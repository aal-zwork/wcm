version: "3.3"

services:
    motion:
        build: ./motion
        restart: always
        env_file:
            - default.env
        volumes: 
            - ./motion-etc:/usr/local/etc/motion
            - ./rclone-etc:/root/.config/rclone
            - motion-data:/var/lib/motion
            - motion-log:/var/log/motion
        ports:
            - "8080:8080"
            - "8081:8081"
        devices:
            - /dev/video0:/dev/video0
            - /dev/snd
volumes:
    motion-etc:
    motion-data:
    motion-log:
    rclone-etc:
